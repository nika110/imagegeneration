<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Generator</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
        <nav class="navbar">
            <div class="nav-content">
                <div class="logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="7" height="7" rx="1" fill="currentColor"/>
                        <rect x="14" y="3" width="7" height="7" rx="1" fill="currentColor"/>
                        <rect x="3" y="14" width="7" height="7" rx="1" fill="currentColor"/>
                        <rect x="14" y="14" width="7" height="7" rx="1" fill="currentColor"/>
                    </svg>
                    <span>ImageGen</span>
                </div>
                <div class="nav-status" id="navStatus">
                    <span class="status-dot"></span>
                    Ready
                </div>
            </div>
        </nav>

        <main class="main-content">
            <div class="container">
                <div class="generation-panel">
                    <div class="panel-header">
                        <h1>Generate Images</h1>
                        <p>Create high-quality images using AI technology</p>
                    </div>

                    <!-- Server Inactive Warning Banner -->
                    <div id="serverInactiveBanner" class="server-inactive-banner hidden">
                        <div class="banner-content">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                            </svg>
                            <span>Server is currently inactive. Please wait for connection to be restored before generating images.</span>
                        </div>
                    </div>

                    <form id="imageForm" class="generation-form">
                        <div class="form-section">
                            <label for="prompt" class="form-label">Prompt</label>
                            <textarea 
                                id="prompt" 
                                name="prompt" 
                                class="form-textarea"
                                rows="4"
                                placeholder="Describe what you want to create..."
                                required
                            ></textarea>
                        </div>

                        <div class="form-section">
                            <label class="form-label">Reference Images <span class="optional">(Optional)</span></label>
                            <div class="reference-input-tabs">
                                <button type="button" class="tab-button active" data-tab="upload">Upload Images</button>
                                <button type="button" class="tab-button" data-tab="url">Image URL</button>
                            </div>
                            
                            <!-- Upload Tab -->
                            <div id="uploadTab" class="reference-tab active">
                                <div class="file-upload-area" id="fileUploadArea">
                                    <div class="upload-content">
                                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                            <polyline points="7,10 12,15 17,10"/>
                                            <line x1="12" y1="15" x2="12" y2="3"/>
                                        </svg>
                                        <h3>Upload Reference Images</h3>
                                        <p>Drag and drop multiple images here, or click to browse</p>
                                        <p class="upload-hint">Supports JPEG, PNG, WebP, GIF â€¢ Max 10MB per image â€¢ Up to 5 images</p>
                                    </div>
                                    <input 
                                        type="file" 
                                        id="imageUpload" 
                                        name="uploaded_images"
                                        accept="image/jpeg,image/jpg,image/png,image/webp,image/gif"
                                        multiple
                                        class="file-input"
                                    />
                                </div>
                                <div id="uploadedImagesPreview" class="uploaded-images-preview"></div>
                            </div>
                            
                            <!-- URL Tab -->
                            <div id="urlTab" class="reference-tab">
                                <input 
                                    type="url" 
                                    id="reference_image_url" 
                                    name="reference_image_url" 
                                    class="form-input"
                                    placeholder="https://example.com/image.jpg"
                                />
                                <div id="imagePreview" class="image-preview hidden">
                                    <img id="previewImg" src="" alt="Reference preview">
                                    <button type="button" id="removeImage" class="remove-btn">Ã—</button>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-section">
                                <label for="max_images" class="form-label">Images</label>
                                <select id="max_images" name="max_images" class="form-select">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4" selected>4</option>
                                </select>
                                <div id="imageCountHint" class="form-hint">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                                    </svg>
                                    <span>ðŸ’¡ For multiple images, be specific in your prompt to generate varied results</span>
                                </div>
                            </div>

                            <div class="form-section">
                                <label for="dimensionMethod" class="form-label">Dimensions</label>
                                <select id="dimensionMethod" class="form-select" style="margin-bottom: 0.75rem;">
                                    <option value="resolution">Quick Resolution (1K, 2K, 4K)</option>
                                    <option value="custom">Custom Dimensions</option>
                                </select>
                                
                                <!-- Method 1: Resolution -->
                                <div id="resolutionControls" class="dimension-controls">
                                    <select id="size" name="size" class="form-select">
                                        <option value="1K">1K (1024px)</option>
                                        <option value="2K" selected>2K (2048px)</option>
                                        <option value="4K">4K (4096px)</option>
                                    </select>
                                </div>
                                
                                <!-- Method 2: Custom Dimensions -->
                                <div id="customControls" class="dimension-controls hidden">
                                    <select id="presetDimensions" class="form-select" style="margin-bottom: 0.5rem;">
                                        <option value="">Choose a preset...</option>
                                        <optgroup label="Square">
                                            <option value="1024x1024">Square Small (1024Ã—1024)</option>
                                            <option value="2048x2048">Square Medium (2048Ã—2048)</option>
                                            <option value="3072x3072">Square Large (3072Ã—3072)</option>
                                        </optgroup>
                                        <optgroup label="Landscape">
                                            <option value="2048x1536">Landscape 4:3 (2048Ã—1536)</option>
                                            <option value="2048x1152">Landscape 16:9 (2048Ã—1152)</option>
                                            <option value="3072x1728">Landscape 16:9 HD (3072Ã—1728)</option>
                                            <option value="2048x1365">Landscape 3:2 (2048Ã—1365)</option>
                                        </optgroup>
                                        <optgroup label="Portrait">
                                            <option value="1536x2048">Portrait 3:4 (1536Ã—2048)</option>
                                            <option value="1152x2048">Portrait 9:16 (1152Ã—2048)</option>
                                            <option value="1365x2048">Portrait 2:3 (1365Ã—2048)</option>
                                            <option value="1728x3072">Portrait 9:16 HD (1728Ã—3072)</option>
                                        </optgroup>
                                    </select>
                                    
                                    <div class="custom-dimension-inputs">
                                        <div style="display: flex; gap: 0.5rem; align-items: center;">
                                            <input type="number" id="customWidth" placeholder="Width" min="1024" max="4096" class="form-input" style="flex: 1;">
                                            <span style="color: var(--primary-500); font-weight: 500;">Ã—</span>
                                            <input type="number" id="customHeight" placeholder="Height" min="1024" max="4096" class="form-input" style="flex: 1;">
                                        </div>
                                        <div class="dimension-info" style="font-size: 0.75rem; color: var(--primary-500); margin-top: 0.5rem;">
                                            Range: 1024-4096px each â€¢ Aspect ratio: 1/16 - 16
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button type="submit" id="generateBtn" class="generate-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" fill="currentColor"/>
                            </svg>
                            Generate
                        </button>
                    </form>
                </div>

                <div id="loading" class="loading-state hidden">
                    <div class="loading-content">
                        <div class="loading-spinner"></div>
                        <h3>Generating Images</h3>
                        <p>This usually takes 10-30 seconds</p>
                    </div>
                </div>

                <div id="error" class="error-state hidden">
                    <div class="error-content">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                            <line x1="12" y1="8" x2="12" y2="12" stroke="currentColor" stroke-width="2"/>
                            <line x1="12" y1="16" x2="12.01" y2="16" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <h3>Generation Failed</h3>
                        <p id="errorMessage">Something went wrong</p>
                    </div>
                </div>

                <div id="results" class="results-section hidden">
                    <div class="results-header">
                        <h2>Generated Images</h2>
                        <div id="usageText" class="usage-stats"></div>
                    </div>
                    <div id="imageGrid" class="image-grid"></div>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>